{"chunk_index":"3","content":"/users/${user_name}/messages?$filter=lastModifiedDateTime ge ${processTime}&$top=1000&$orderby=lastModifiedDateTime desc` * `microsoft_messages_attachments` * URL: `https://graph.microsoft.com/v1.0/users/${user_name}/messages/${mail_id}/attachments/` #### - Source Query **Baggage:** `Riverx_FlightLegForPax_Query` **Cargo:** `Riverx_CargoWeight_Query` #### - Data Retrieval Trigger & Steps **Trigger:** Every 5 minutes **Steps:** * **Baggage & Cargo:** * Execute `Riverx_FlightLegForPax_Query` query * Call `loadAndTrim` service using the fields coming from `Riverx_FlightLegForPax_Query` query result * Execute `Riverx_CargoWeight_Query` query using `flightLegId` field coming from `Riverx_FlightLegForPax_Query` query result * **Baggage Weight/Number for Offline Stations:** * Call `microsoftonline` service * Call `microsoft_messages` service using `access_token` coming from `microsoftonline` service * When `hasAttachments` field coming from `microsoftonline` service is true then call `microsoft_messages_attachments` service using `mail_id` coming from `microsoftonline` service #### - Data Handling Operation **Baggage Weight/Number for Offline Stations:** For offline stations, the LDM emails are parsed to fill the `numberOfTotalBaggage` and `totalBaggageWeight` fields. #### - Change Data Capture Operation **Baggage & Cargo:** * Unique Key: `flightLegId` * Insert and update operations are carried out using Unique Key. * When data lastly sourced from LDM email for a record, no subsequent update operations are performed on that record. * No deletion is performed. Please refer to the Flight Leg Data Model for flight status. **Baggage Weight/Number for Offline Stations:** * Unique Key: A composite key combining `carrier`, `flightNumber`, `udor` fields. * Update operations are carried out using Unique Key. * When data lastly sourced from LDM email for a record, no subsequent update operations are performed on that record. * No deletion or insertion is performed. * Baggage & Cargo","fm:title":"Baggage Data Models description: published: true date: 2025-02-24T11:34:21.777Z tags: editor: markdown dateCreated: 2024-09-05T12:38:50.573Z","id":"gitlab://https://gitlab.com/avsos-wiki/riverx@main|sec=main|i=3|o=5400","length":"2000","offset":"5400","repo_branch":"main","repo_path":"river-x/source-mapping/baggage-data-models.md","source":"gitlab://https://gitlab.com/avsos-wiki/riverx@main"}
