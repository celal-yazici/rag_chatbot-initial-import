{"chunk_index":"1","content":"ilter=lastModifiedDateTime ge ${processTime}&$top=1000&$orderby=lastModifiedDateTime desc` * `microsoft_messages_attachments` * URL: `https://graph.microsoft.com/v1.0/users/${user_name}/messages/${mail_id}/attachments/` #### - Source Query * Baggage info: `Riverx_FlightLegForPax_Query` #### - Data Retrieval Trigger & Steps * Trigger: Every 5 minutes * Steps: * Baggage info: * Execute `Riverx_FlightLegForPax_Query` query * Call `CustomerManifest` service using the fields coming from `Riverx_FlightLegForPax_Query` query result * Baggage status/reason: * Call `microsoftonline` service * Call `microsoft_messages` service using `access_token` coming from `microsoftonline` service * When `hasAttachments` field coming from `microsoftonline` service is true then call `microsoft_messages_attachments` service using `mail_id` coming from `microsoftonline` service #### - Change Data Capture Operation * Unique Key: A composite key combining `baggageId`, `carrier`, `flightNumber` and `udor` fields ### Mapping |Model Attribute|Source Table|Source Service|Source Field|Detail| |:----|:----|:----|:----|:----| |extraInfo| | | | | |baggageId| |`CustomerManifest`|`<BagTagNumber>`| | |flightLegId|`schedops.LEG`| |`LEG_NO`| | |carrier|`schedops.LEG`| |`FN_CARRIER`| | |flightNumber|`schedops.LEG`| |`FN_NUMBER`| | |udor|`schedops.LEG`| |`DEP_SCHED_DT`, `DEP_DT`|when `schedops.LEG.DEP_DT` is not null<br>then `schedops.LEG.DEP_DT`(YYYY-MM-DD)<br>else `schedops.LEG.DEP_SCHED_DT`(YYYY-MM-DD)| |inboundLegId| | | |N/A in the source system.| |isExcess| | | |N/A in the source system.| |outboundLegId| | | |N/A in the source system.| |pnr| |`CustomerManifest`|`<pnr>`| | |status| | | |BMM/BPM Parser| |reason| | | |BMM/BPM Parser| |weight| |`CustomerManifest`|`<BaggageWeight>`| | # Baggage Statistics Data Model ### Data Retrieval #### - Data Retrieval Scope **Baggage:** * Retrieve records for flights meeting the following conditions(40 minutes and 20 minutes before Departure Time and 60 minutes, 120 mi","fm:title":"Baggage Data Models description: published: true date: 2025-02-24T11:34:21.777Z tags: editor: markdown dateCreated: 2024-09-05T12:38:50.573Z","id":"gitlab://https://gitlab.com/avsos-wiki/riverx@main|sec=main|i=1|o=1800","length":"2000","offset":"1800","repo_branch":"main","repo_path":"river-x/source-mapping/baggage-data-models.md","source":"gitlab://https://gitlab.com/avsos-wiki/riverx@main"}
