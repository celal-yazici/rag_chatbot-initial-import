{"chunk_index":"1","content":".LEG_STATE` <> (“CNL“ or “DEL“ or “INC“) #### - Source Service * `FlightManifest` * WSDL: `https://iflyresapi.ibsgen.com/iRes_Booking_WS/services/FlightPort` * Method: `retrieveFlightManifest` #### - Source Query **Retrieving Pax in Flight Window:** `Riverx_FlightLegForPax_Query` **Retrieving Pax in Operational Window:** `Riverx_FlightLegForPax72hours_Query` #### - Data Retrieval Trigger & Steps **Trigger:** * **Retrieving Pax in Flight Window:** Every 5 minutes * **Retrieving Pax in Operational Window:** Every 30 minutes **Steps:** * **Retrieving Pax in Flight Window:** * Execute `Riverx_FlightLegForPax_Query` query * Call `FlightManifest` service using the fields coming from `Riverx_FlightLegForPax_Query` query result * **Retrieving Pax in Flight Window:** * Execute `Riverx_FlightLegForPax72hours_Query` query * Call `FlightManifest` service using the fields coming from `Riverx_FlightLegForPax72hours_Query` query result #### - Data Handling Operation * When `FlightManifest.<TicketNumber>` field is null then the related Pax Info is not processed. #### - Change Data Capture Operation * Unique Key: A composite key combining `pnr`, `passengerReferenceId`, `flightLegId` fields. * Pax Info: * Insert and update operations are carried out using Unique Key. * No delete operation is performed; instead, `FlightManifest.<CheckinStatus>` is updated based on the retrieved data. * Pax SSR Info: * Insert and delete operations are carried out using Unique Key. * No update operation is performed; instead, if any change are detected in SSR Info; * Retrieve the related SSR Info based on Unique Key. * Delete the retreived SSR Info. * Insert the the SSR Info from the source system. ### Mapping |Model Attribute|Source Table|Source Service|Source Field|Detail| |:----|:----|:----|:----|:----| |extraInfo| | | | | |flightLegId|`schedops.LEG`| |`LEG_NO`| | |arrivalAirport|`schedops.LEG`| |`ARR_AP_ACTUAL`| | |arrivalTime|`schedops.LEG`| |`ARR_SCHED_DT`, `ARR_DT`|when `schedops.LEG.ARR_DT` is n","fm:title":"Passenger Data Models description: published: true date: 2025-05-09T09:26:22.878Z tags: editor: markdown dateCreated: 2024-09-05T12:35:07.136Z","id":"gitlab://https://gitlab.com/avsos-wiki/riverx@main|sec=main|i=1|o=1800","length":"2000","offset":"1800","repo_branch":"main","repo_path":"river-x/source-mapping/passenger-data-models.md","source":"gitlab://https://gitlab.com/avsos-wiki/riverx@main"}
