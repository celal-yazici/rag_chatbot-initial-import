{"chunk_index":"18","content":"he following conditions(From 2 hour before the departure time, to the departure time); * (`schedops.LEG.DEP_DT` - 2 hour <= Current Date(UTC) <= `schedops.LEG.DEP_DT`) and * `schedops.LEG.WHAT_IF` = “_” and * `schedops.LEG.LEG_TYPE` = (“C“ or “J“ or “O“) and * `schedops.LEG.LEG_STATE` <> (“CNL“ or “DEL“ or “INC“) #### - Source Service * `FlightManifest` #### - Source Query * `Riverx_FlightLegForFlightPaxTransfer_Query` #### - Data Retrieval Trigger & Steps **Trigger:** Every 30 minutes **Steps:** * Execute `Riverx_FlightLegForFlightPaxTransfer_Query` query * Call `FlightManifest` service using the fields coming from `Riverx_FlightLegForFlightPaxTransfer_Query` query result #### - Data Handling Operation * When both `<Inbound>` and `<OutBoundDetails>` do not exist, `transferStatus`(see Mapping for details) of the associated Flight PAX Transfers' records are updated as \"CANCELLED\" for corresponding `pnrFlightId`(see Mapping for details). #### - Change Data Capture Operation * Unique Key: A composite key combining `pnr`, `pnrCreationDate` and `flightId` fields. * Insert and update operations are carried out using Unique Key. * No delete operation is performed; instead, `transferStatus`(see Mapping for details) is updated based on the retrieved data. ### Mapping |Model Attribute|Source Topic|Source Field|Detail| |:--------------|:-----------|:-----------|:----| |extraInfo| | | | |pnrFlightId|`FlightManifest`|`<PNRNumber>`, `<DepartureDate>`, `<CarrierCode>`, `<FlightNumber>`|`<PNRNumber>`+”-”+`<DepartureDate>`(YYYYMMDD)+”-”+`<CarrierCode>`+”-”+`<FlightNumber>`| |transferStatus|`FlightManifest`|`<Inbound>`, `<OutBoundDetails>`|When both `<Inbound>` and `<OutBoundDetails>` do not exist then “CANCELLED“ else “ACTIVE“.| |pnr|`FlightManifest`|`<PNRNumber>`| | |pnrCreationDate|`FlightManifest`|`<TimeStamp>`| | |flightId|`FlightManifest`|`<DepartureDate>`, `<CarrierCode>`, `<FlightNumber>`|`<DepartureDate>`(YYYYMMDD)+”-”+`<CarrierCode>`+”-”+`<FlightNumber>`| |inBoundTransferPa","fm:title":"Passenger Data Models description: published: true date: 2025-05-09T09:26:22.878Z tags: editor: markdown dateCreated: 2024-09-05T12:35:07.136Z","id":"gitlab://https://gitlab.com/avsos-wiki/riverx@main|sec=main|i=18|o=32400","length":"2000","offset":"32400","repo_branch":"main","repo_path":"river-x/source-mapping/passenger-data-models.md","source":"gitlab://https://gitlab.com/avsos-wiki/riverx@main"}
